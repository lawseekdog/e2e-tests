id: progressive
name: 渐进式对话
description: 信息不完整，通过多轮对话逐步补充。适用于用户初次描述简单的场景。

interactions:
  - id: round_1
    name: 初始咨询描述
    user_action:
      type: chat
      message: |
        我租房退租时房东不退押金，说墙面有污损。
        押金2000元，我觉得不合理。
    
    ai_response:
      sse_events:
        - event: skill_start
          expect:
            skill_id: "consult-intake"
        - event: delta
          expect:
            contains: ["押金", "租赁"]
        - event: card
          expect:
            review_type: "clarify"
            questions_count: ">= 1"
        - event: end
          expect:
            reason: "card"
      
      final_state:
        type: card
        card:
          review_type: "clarify"
          skill_id: "consult-intake"
          questions:
            - field_key: "profile.background"
              input_type: "textarea"
              required: true
            - field_key: "data.non_litigation.intake_stop_ask"
              input_type: "boolean"
              required: true
      
      thinking:
        must_include: ["押金", "租赁"]
        must_not_include: ["错误", "失败"]

  - id: round_2
    name: 补充详细信息
    user_action:
      type: resume_card
      card_answers:
        - field_key: "profile.background"
          value: |
            我叫张三，与房东李四签订租赁合同，押金2000元。
            租期一年，2023年1月到2024年1月。
            退租时房东以墙面污损为由拒退押金。
            我有租赁合同、交接清单、聊天记录。
            诉求：退还押金2000元并承担合理费用。
        - field_key: "data.non_litigation.intake_stop_ask"
          value: false
    
    ai_response:
      sse_events:
        - event: skill_start
          expect:
            skill_id: "consult-intake"
        - event: delta
          expect:
            contains: ["押金", "租赁", "合同"]
        - event: tool_start
          expect:
            tool_name: "knowledge.search"
        - event: tool_end
          expect:
            success: true
        - event: end
          expect:
            reason: "stop"
      
      final_state:
        type: message
        message:
          contains: ["押金", "租赁", "合同", "权利", "民法典"]
          not_contains: ["错误", "失败"]
          length: ">= 300"
      
      thinking:
        must_include: ["押金", "租赁合同", "民法典"]
        must_not_include: ["错误", "失败"]

  - id: round_3
    name: 追问后续建议
    user_action:
      type: chat
      message: "如果协商不成，我应该怎么办？建议起诉吗？"
    
    ai_response:
      sse_events:
        - event: skill_start
          expect:
            skill_id: "agentic-search"
        - event: delta
          expect:
            contains: ["起诉", "诉讼"]
        - event: end
          expect:
            reason: "stop"
      
      final_state:
        type: message
        message:
          contains: ["起诉", "法院", "诉讼"]
          length: ">= 200"
